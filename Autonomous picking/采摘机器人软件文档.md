==*使用前请在~/.zshrc中的ros_enable()函数中添加以下设置==

```
source ~/1008_catkin_ws/devel/setup.zsh
```



本库中的代码主要包含机械臂实际运转时所用控制代码，以及杜晓峰毕设期间完成的机械臂仿真抓取代码。

> 最后经手作者：杜晓峰
>
> 时间：2023/3

以下将根据每个具体的重要的文件夹分别介绍代码的功能。

## detection：

番茄识别代码，使用yolov5训练实现。

目前内含已训练好的识别网络。由于在该库中需要用到这部分代码，因此保留。

> 最后经手作者：王文杰
>
> 时间：2022/3



## dual_moveit_config:

moveit生成的双臂控制器配置，目前不需要修改，由于moveit需要调用该配置，因此也需要保留在库中。



## iai_kinect2：

内含kinect开源工具包，驱动及roslaunch文件。用于开启和控制kinect。



## jaka_zu7_v2：

内含机械臂模型urdf文件，是后续程序运行必要调用的文件。



## moveit_calibration:

机器人手眼标定 rviz插件。目前损坏无法使用。

目前kinect相机外参存在错误，且未进行重新标定。

==由于该库损坏，需要更新标定方法。==



## moveit_tutorials：

原为moveit教程。

杜晓峰在该库基础上开发了机械臂仿真抓取代码。具备一些可视化方法。





#### move_group_interface/src/showtomato.cpp:

获取tomate消息，show在rviz里面。消息来源realsenseD455_bridge包中的detection_client.py。



#### move_group_interface/src/grasp_tomato.cpp：

这个文件里的头文件是包含了机械臂采摘规划moveit的大架构。

头文件包含具体的机械臂控制器。即move_group_interface/include/ArmMoveitController.hpp：

display_path函数，轨迹展示。

决策部分在grasp里面。提供抓取位姿，抓取顺序等。

具体函数功能有待后续补充。



#### move_group_interface/include/ArmMoveitController.hpp

机械臂控制器文件，一个库建立单机械臂的各种操作。

用单机械臂库派生dual arm库。



该包的仿真环境使用步骤如下：

打开终端：

```
roslaunch dual_moveit_config demo.launch
//启动rviz环境
```

另开终端：

```
rosrun realsenseD455_bridge detection_client.py
//发布虚拟番茄消息
```

另开终端：

```
roslaunch moveit_tutorials grasp_tomato_MGI.launch
//运行番茄抓取包
```



## realsenseD455_bridge：

#### detection_client.py：

Point类。把番茄位置发布出去。订阅相机rgbd图片信息，通过识别，获得番茄位置等信息，并将其输出至ros系统中。



## picking:

yzy写的机器人控制程序。用于规划。

> 最后经手作者：杨智宇
>
> 时间：2022/3

主要的是pickingv2：使用pycharm打开。

这个里面包含了感知规划决策。连着硬件的。里面感知决策规划的内容还得看看。

==*使用时，根据文件夹中start_steps.txt中的顺序依次打开终端输入运行。而后连接机械臂成功后将在网页前端端口显示当前具体情况和操作按键。==



## qjaka_gui：

机械臂控制的gui界面。





## yzy_simulation:

==*使用前请在~/.zshrc中的ros_enable()函数中添加以下设置==

```
source ~/0120_catkin_ws/devel/setup.zsh
```

yzy写的仿真平台，可以生成2D，3D的仿真规划界面，具体使用方法可以联系yzy。

